<!DOCTYPE html>	
 <html lang="pt">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Advocacy - Escritório</title>
		<link href="/library/css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="/library/css/bootstrap-responsive.min.css" rel="stylesheet">
		<link href="/library/css/admin.css" rel="stylesheet">
 	</head>
 	<body>
 	
		<div id="menu"></div>
 		
		<div class="container">
			<ul class="breadcrumb">
			    <li><a href="#">Escritórios</a> <span class="divider">/</span></li>
			    <li><a href="#">Clientes</a> <span class="divider">/</span></li>
			    <li class="active">Alterar</li>
		    </ul>
		    
		    <form class="form-horizontal" style="display: block">
		    	<fieldset>
					<legend>Dados de cadastrais</legend>
				</fieldset>
				<div class="control-group">
					<label class="control-label">Nome: *</label>
					<div class="controls">
						<input name="name" type="text" class="span5" maxlength="255">
						<span id="spanError-name" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">E-mail: *</label>
					<div class="controls">
						<input name="email" type="text" class="span5" maxlength="255">
						<span id="spanError-email" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">RG:</label>
					<div class="controls">
						<input name="rg" type="text" class="span2" maxlength="100">
						<span id="spanError-rg" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">CPF: *</label>
					<div class="controls">
						<input name="cpf" type="text" class="span2" maxlength="20">
						<span id="spanError-cpf" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">Data de Nasc:</label>
					<div class="controls">
						<input name="born" type="text" class="span2" maxlength="20">
						<span id="spanError-born" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">Telefone Fixo:</label>
					<div class="controls">
						<input name="phone" type="text" class="span2" maxlength="20">
						<span id="spanError-phone" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">Telefone Celular: *</label>
					<div class="controls">
						<input name="cellphone" type="text" class="span2" maxlength="20">
						<span id="spanError-cellphone" class="help-inline"></span>
					</div>
				</div>
				<fieldset>
					<legend>Dados de endereço</legend>
				</fieldset>
				<div class="control-group">
					<label class="control-label">CEP: *</label>
					<div class="controls">
						<input name="addressZipcode" type="text" class="span2" maxlength="20">
						<span id="spanError-addressZipcode" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">Endereço: *</label>
					<div class="controls">
						<input name="addressStreet" type="text" class="span4" maxlength="100">
						<span id="spanError-addressStreet" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">Número: *</label>
					<div class="controls">
						<input name="addressNumber" type="text" class="span1" maxlength="20">
						<span id="spanError-addressNumber" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">Cidade: *</label>
					<div class="controls">
						<input name="addressCity" type="text" class="span3" maxlength="100">
						<span id="spanError-addressCity" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">Complemento:</label>
					<div class="controls">
						<input name="addressComplement" type="text" class="span3" maxlength="100">
						<span id="spanError-addressComplement" class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input name="id" type="hidden">
						<button type="button" class="btn btn-primary" onclick="postJson('', '/advocacy-web/admin/client/save', $('form').serialize());">Salvar</button>
					</div>
				</div>
				
			</form>
		    
		</div>
 		
 		<div id="footer"></div>
 		
 	 	<script src="/library/js/jquery-1.8.3.min.js"></script>
		<script src="/library/js/bootstrap.min.js"></script>
		<script src="/library/js/jquery.maskedinput-1.3.min.js"></script>

		<script src="/library/js/functions.js" charset="utf-8"></script>
		<script src="/library/js/admin.js" charset="utf-8"></script>

		<script>
			loadMenuAdvocacy();
			loadFooter();
			
			function callback(id, data) {
				if (data.status) {
					if (id=='load') {
						$('input[name=id]').val(data.generic.id);
						$('input[name=name]').val(data.generic.name);
						$('input[name=email]').val(data.generic.email);
						$('input[name=rg]').val(data.generic.rg);
						$('input[name=cpf]').val(data.generic.cpf);
						$('input[name=phone]').val(data.generic.phone);
						$('input[name=cellphone]').val(data.generic.cellphone);
						$('input[name=addressStreet]').val(data.generic.addressStreet);
						$('input[name=addressCity]').val(data.generic.addressCity);
						$('input[name=addressZipcode]').val(data.generic.addressZipcode);
						$('input[name=addressNumber]').val(data.generic.addressNumber);
						$('input[name=addressComplement]').val(data.generic.addressComplement);
						
						var dat = new Date();
						dat.setTime(data.generic.born);
						var dtAll = '';
						if (dat.getDate().toString().length==1) {
							dtAll += '0'+dat.getDate()+'/';
						} else {
							dtAll += dat.getDate()+'/';
						}
						if ((dat.getMonth()+1).toString().length==1) {
							dtAll += '0'+(dat.getMonth()+1).toString()+'/';
						} else {
							dtAll += (dat.getMonth()+1).toString()+'/';
						}
						dtAll+=dat.getFullYear();
						$('input[name=born]').val(dtAll);
					} else {
						alert("Cliente atualizado com sucesso.", true);
						location.href='/advocacy/admin/client/consult';
					}
				} else {
					errorForm(data, '/advocacy');
				}
			}
			
			getJson('load', '/advocacy-web/admin/client/load?id='+getURLParameter('pid'));
			
			$("input[name='cpf']").mask("999.999.999-99");
			$("input[name='phone']").mask("(99) 9999-9999");
			$("input[name='cellphone']").mask("(99) 9999-9999?9");
			$("input[name='addressZipcode']").mask("99999-999");
			$("input[name='born']").datepicker({
				changeMonth: true,
				changeYear: true
			});
			$("input[name='born']").datepicker( "option", "dateFormat", 'dd/mm/yy' );
			$("input[name='born']").mask("99/99/9999");
		</script>
 	</body>
 </html>